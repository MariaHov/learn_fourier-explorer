<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CodeSignal Fourier Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./design-system/colors/colors.css">
  <link rel="stylesheet" href="./design-system/spacing/spacing.css">
  <link rel="stylesheet" href="./design-system/typography/typography.css">
  <link rel="stylesheet" href="./design-system/components/button/button.css">
  <link rel="stylesheet" href="./design-system/components/boxes/boxes.css">
  <link rel="stylesheet" href="./design-system/components/input/input.css">
  <link rel="stylesheet" href="./design-system/components/dropdown/dropdown.css">
  <link rel="stylesheet" href="./design-system/components/tags/tags.css">
  <link rel="stylesheet" href="./design-system/components/modal/modal.css">

  <link rel="stylesheet" href="./bespoke-template.css" />
  <link rel="stylesheet" href="./fourier-explorer.css" />
</head>
<body class="bespoke">
  <header class="header">
    <h1 class="heading-small">CodeSignal Fourier Explorer</h1>
    <div class="spacer"></div>
    <div id="status" class="status">Ready</div>
    <button id="btn-help" class="button button-text">Help</button>
  </header>

  <main class="main-layout">
    <aside class="sidebar">
      <section class="box card ui-card controls-card">
        <h2 class="heading-small">Fourier Decomposition Explorer</h2>
        <p class="controls-intro">Generate synthetic signals, analyze DFT components, and reconstruct with frequency-domain filters.</p>

        <h3 class="control-group-title">Source</h3>
        <label class="control-field">Source signal
          <select id="source" class="input">
            <option value="sine">Sine</option>
            <option value="two-sines">Two sines</option>
            <option value="square-series">Square (Fourier series)</option>
          </select>
        </label>

        <label class="control-field">Frequency f1 (Hz)
          <div class="control-header">
            <span class="control-caption">Primary sine frequency</span>
            <span id="freq1-value" class="tag">120</span>
          </div>
          <input id="freq1" class="input" type="range" min="10" max="1000" step="1" value="120" />
        </label>

        <label class="control-field">Frequency f2 (Hz)
          <div class="control-header">
            <span class="control-caption">Used in two-sines mode</span>
            <span id="freq2-value" class="tag">260</span>
          </div>
          <input id="freq2" class="input" type="range" min="10" max="2000" step="1" value="260" />
        </label>

        <h3 class="control-group-title">Analysis resolution</h3>
        <label class="control-field">Samples
          <div class="control-header">
            <span class="control-caption">Power-of-two sample count</span>
            <span id="samples-value" class="tag">1024</span>
          </div>
          <input id="samples" class="input" type="range" min="256" max="2048" step="256" value="1024" />
        </label>

        <hr />

        <h3 class="control-group-title">Fourier Series + Window</h3>
        <label class="control-field">Odd harmonics count
          <div class="control-header">
            <span class="control-caption">Used in square-series mode</span>
            <span id="harmonics-value" class="tag">9</span>
          </div>
          <input id="harmonics" class="input" type="range" min="1" max="31" step="1" value="9" />
        </label>

        <label class="control-field">Window type
          <select id="window-type" class="input">
            <option value="rectangular">Rectangular</option>
            <option value="hann">Hann</option>
          </select>
        </label>

        <hr />

        <h3 class="control-group-title">Filtering</h3>
        <label class="control-field">Low-pass cutoff bin
          <div class="control-header">
            <span class="control-caption">Keep bins from 0 to cutoff</span>
            <span id="low-pass-value" class="tag">128</span>
          </div>
          <input id="low-pass" class="input" type="range" min="1" max="1023" step="1" value="128" />
        </label>

        <label class="row inline-check">
          <input id="notch-enabled" type="checkbox" checked />
          <span>Enable notch filter</span>
        </label>

        <label class="control-field">Notch center bin
          <div class="control-header">
            <span class="control-caption">Center of removed frequency band</span>
            <span id="notch-bin-value" class="tag">60</span>
          </div>
          <input id="notch-bin" class="input" type="range" min="1" max="1023" step="1" value="60" />
        </label>

        <label class="control-field">Notch width (bins)
          <div class="control-header">
            <span class="control-caption">Bins removed around center</span>
            <span id="notch-width-value" class="tag">3</span>
          </div>
          <input id="notch-width" class="input" type="range" min="0" max="24" step="1" value="3" />
        </label>

        <div class="row controls-actions">
          <button id="btn-analyze" class="button button-primary">Analyze</button>
          <button id="btn-reset-filters" class="button button-secondary">Reset Filters</button>
        </div>
      </section>
    </aside>

    <section class="content-area viz-grid">
      <article class="panel box card ui-card panel-time">
        <h2 class="heading-small">Time Domain (Original vs Reconstructed)</h2>
        <canvas id="signal-canvas" width="900" height="260"></canvas>
      </article>

      <article class="panel box card ui-card panel-spectrum">
        <h2 class="heading-small">Original Spectrum Magnitude</h2>
        <canvas id="spectrum-noisy-canvas" width="900" height="260"></canvas>
      </article>

      <article class="panel box card ui-card panel-spectrum">
        <h2 class="heading-small">Filtered Spectrum Magnitude</h2>
        <canvas id="spectrum-filtered-canvas" width="900" height="260"></canvas>
      </article>

      <section class="box card ui-card components-card">
        <h3 class="heading-small">Strongest Components</h3>
        <p class="components-note">Top frequency bins from the original spectrum (Hz and magnitude).</p>
        <ul id="components-list" class="components-list"></ul>
      </section>
    </section>
  </main>

  <dialog id="help-dialog" class="help-dialog">
    <article>
      <h2>How to use</h2>
      <ol>
        <li>Pick a synthetic source and tune frequencies.</li>
        <li>Change harmonics and window type to inspect spectral leakage.</li>
        <li>Use low-pass and notch filters to modify complex frequency bins.</li>
        <li>Compare the original and reconstructed waveforms and spectra.</li>
      </ol>
      <button id="btn-close-help" class="button button-primary">Close</button>
    </article>
  </dialog>

  <script type="module" src="./app.js"></script>
</body>
</html>
