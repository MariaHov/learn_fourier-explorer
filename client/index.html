<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CodeSignal Fourier Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./design-system/colors/colors.css">
  <link rel="stylesheet" href="./design-system/spacing/spacing.css">
  <link rel="stylesheet" href="./design-system/typography/typography.css">
  <link rel="stylesheet" href="./design-system/components/button/button.css">
  <link rel="stylesheet" href="./design-system/components/boxes/boxes.css">
  <link rel="stylesheet" href="./design-system/components/input/input.css">
  <link rel="stylesheet" href="./design-system/components/dropdown/dropdown.css">
  <link rel="stylesheet" href="./design-system/components/tags/tags.css">
  <link rel="stylesheet" href="./design-system/components/modal/modal.css">

  <link rel="stylesheet" href="./bespoke-template.css" />
  <link rel="stylesheet" href="./fourier-explorer.css" />
</head>
<body class="bespoke">
  <header class="header">
    <h1 class="heading-small">CodeSignal Fourier Explorer</h1>
    <div class="spacer"></div>
    <div id="status" class="status">Ready</div>
    <button id="btn-help" class="button button-text">Help</button>
  </header>

  <main class="main-layout">
    <aside class="sidebar">
      <section class="box card ui-card controls-card">
        <h2 class="heading-small">Audio Fourier Lab</h2>
        <p class="controls-intro">Tune source, add noise, then remove it in frequency domain.</p>

        <h3 class="control-group-title">Source</h3>
        <label class="control-field">Source signal
          <select id="source" class="input">
            <option value="clean-speech-file">Clean speech (file)</option>
            <option value="sine">Sine</option>
            <option value="square">Square</option>
            <option value="triangle">Triangle</option>
            <option value="sawtooth">Sawtooth</option>
            <option value="pulse">Pulse</option>
            <option value="voice-like">Voice-like</option>
          </select>
        </label>

        <h3 class="control-group-title">Analysis resolution</h3>
        <label class="control-field">Samples
          <div class="control-header">
            <span class="control-caption">Analysis resolution</span>
            <span id="samples-value" class="tag">256</span>
          </div>
          <input id="samples" class="input" type="range" min="64" max="512" step="64" value="256" />
        </label>

        <hr />

        <h3 class="control-group-title">Noise</h3>
        <label class="control-field">White noise
          <div class="control-header">
            <span class="control-caption">Broadband random noise</span>
            <span id="white-noise-value" class="tag">0.20</span>
          </div>
          <input id="white-noise" class="input" type="range" min="0" max="1" step="0.01" value="0.2" />
        </label>

        <label class="control-field">Hum noise
          <div class="control-header">
            <span class="control-caption">Single-frequency electrical hum</span>
            <span id="hum-noise-value" class="tag">0.35</span>
          </div>
          <input id="hum-noise" class="input" type="range" min="0" max="1" step="0.01" value="0.35" />
        </label>

        <label class="control-field">Hum frequency bin
          <div class="control-header">
            <span class="control-caption">Target hum peak position</span>
            <span id="hum-bin-value" class="tag">8</span>
          </div>
          <input id="hum-bin" class="input" type="range" min="1" max="63" step="1" value="8" />
        </label>

        <hr />

        <h3 class="control-group-title">Filtering</h3>
        <label class="control-field">Low-pass cutoff bin
          <div class="control-header">
            <span class="control-caption">Remove high-frequency hiss</span>
            <span id="low-pass-value" class="tag">24</span>
          </div>
          <input id="low-pass" class="input" type="range" min="1" max="63" step="1" value="24" />
        </label>

        <label class="row inline-check">
          <input id="notch-enabled" type="checkbox" checked />
          <span>Enable notch around hum bin</span>
        </label>

        <label class="control-field">Notch width (bins)
          <div class="control-header">
            <span class="control-caption">Bins removed around hum frequency</span>
            <span id="notch-width-value" class="tag">1</span>
          </div>
          <input id="notch-width" class="input" type="range" min="0" max="6" step="1" value="1" />
        </label>

        <div class="row controls-actions">
          <button id="btn-analyze" class="button button-primary">Analyze</button>
          <button id="btn-play-noisy" class="button button-secondary">Play Noisy</button>
          <button id="btn-play-filtered" class="button button-secondary">Play Filtered</button>
        </div>
      </section>
    </aside>

    <section class="content-area viz-grid">
      <article class="panel box card ui-card panel-time">
        <h2 class="heading-small">Time Domain (Noisy vs Filtered)</h2>
        <canvas id="signal-canvas" width="900" height="260"></canvas>
      </article>

      <article class="panel box card ui-card panel-spectrum">
        <h2 class="heading-small">Original Spectrum (Noisy)</h2>
        <canvas id="spectrum-noisy-canvas" width="900" height="260"></canvas>
      </article>

      <article class="panel box card ui-card panel-spectrum">
        <h2 class="heading-small">Filtered Spectrum</h2>
        <canvas id="spectrum-filtered-canvas" width="900" height="260"></canvas>
      </article>

      <section class="box card ui-card components-card">
        <h3 class="heading-small">Strongest Components</h3>
        <p class="components-note">Top frequency components from the noisy spectrum.</p>
        <ul id="components-list" class="components-list"></ul>
      </section>
    </section>
  </main>

  <dialog id="help-dialog" class="help-dialog">
    <article>
      <h2>How to use</h2>
      <ol>
        <li>Pick a source and tune white/hum noise.</li>
        <li>Click <strong>Analyze</strong> to view noisy and filtered spectra.</li>
        <li>Adjust low-pass and notch controls to remove noise.</li>
        <li>Compare playback using <strong>Play Noisy</strong> and <strong>Play Filtered</strong>.</li>
      </ol>
      <button id="btn-close-help" class="button button-primary">Close</button>
    </article>
  </dialog>

  <script type="module" src="./app.js"></script>
</body>
</html>
